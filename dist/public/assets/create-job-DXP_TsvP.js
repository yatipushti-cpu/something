import{u as B,a as V,b as O,r as s,c as _,j as e,N as $,C as H,d as z,e as G,f as K,L as a,I as o,S as k,g as E,h as q,i as J,k as i,T as p,B as w}from"./index-DsF33r71.js";function U(){B();const{toast:n}=V(),[,v]=O(),[c,g]=s.useState(""),[d,y]=s.useState(""),[b,S]=s.useState(""),[u,C]=s.useState(""),[P,f]=s.useState(""),[D,L]=s.useState(""),[h,M]=s.useState(""),[x,F]=s.useState(""),[m,N]=s.useState(""),I=v,j=_({mutationFn:async t=>{const r=await fetch("/api/jobs",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t),credentials:"include"});if(!r.ok){const l=await r.text();throw new Error(l||"Failed to create job posting")}return r.json()},onSuccess:()=>{n({title:"Success",description:"Job posting created successfully!"}),g(""),y(""),S(""),M(""),F(""),C(""),f(""),L(""),N(""),I("/employer-dashboard")},onError:t=>{n({title:"Error",description:t.message||"Failed to create job posting",variant:"destructive"})}}),R=t=>{if(t.preventDefault(),!c.trim()||!d.trim()||!u.trim()){n({title:"Error",description:"Please fill in all required fields",variant:"destructive"});return}const r=h?parseInt(h):null,l=x?parseInt(x):null;if(r&&l&&r>l){n({title:"Error",description:"Minimum salary cannot be greater than maximum salary",variant:"destructive"});return}const T={title:c.trim(),description:d.trim(),requirements:b.trim()||null,salaryMin:r,salaryMax:l,location:u.trim(),jobType:P||null,experienceLevel:D||null,skills:m.trim()?m.split(",").map(A=>A.trim()).filter(Boolean):[],isActive:!0};console.log("Submitting job data:",T),j.mutate(T)};return e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx($,{}),e.jsx("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:e.jsxs(H,{children:[e.jsx(z,{children:e.jsx(G,{children:"Create Job Posting"})}),e.jsx(K,{children:e.jsxs("form",{onSubmit:R,className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx(a,{htmlFor:"title",children:"Job Title *"}),e.jsx(o,{id:"title",value:c,onChange:t=>g(t.target.value),placeholder:"e.g. Senior Software Engineer",required:!0})]}),e.jsxs("div",{children:[e.jsx(a,{htmlFor:"location",children:"Location"}),e.jsx(o,{id:"location",value:u,onChange:t=>C(t.target.value),placeholder:"e.g. San Francisco, CA or Remote"})]}),e.jsxs("div",{children:[e.jsx(a,{htmlFor:"jobType",children:"Job Type"}),e.jsxs(k,{onValueChange:t=>f(t),children:[e.jsx(E,{children:e.jsx(q,{placeholder:"Select job type"})}),e.jsxs(J,{children:[e.jsx(i,{value:"full_time",children:"Full-time"}),e.jsx(i,{value:"part_time",children:"Part-time"}),e.jsx(i,{value:"contract",children:"Contract"}),e.jsx(i,{value:"freelance",children:"Freelance"})]})]})]}),e.jsxs("div",{children:[e.jsx(a,{htmlFor:"experienceLevel",children:"Experience Level"}),e.jsxs(k,{onValueChange:t=>L(t),children:[e.jsx(E,{children:e.jsx(q,{placeholder:"Select experience level"})}),e.jsxs(J,{children:[e.jsx(i,{value:"entry",children:"Entry Level"}),e.jsx(i,{value:"mid",children:"Mid Level"}),e.jsx(i,{value:"senior",children:"Senior Level"}),e.jsx(i,{value:"executive",children:"Executive"})]})]})]}),e.jsxs("div",{children:[e.jsx(a,{htmlFor:"salaryMin",children:"Minimum Salary ($)"}),e.jsx(o,{id:"salaryMin",type:"number",value:h,onChange:t=>M(t.target.value),placeholder:"50000"})]}),e.jsxs("div",{children:[e.jsx(a,{htmlFor:"salaryMax",children:"Maximum Salary ($)"}),e.jsx(o,{id:"salaryMax",type:"number",value:x,onChange:t=>F(t.target.value),placeholder:"80000"})]})]}),e.jsxs("div",{children:[e.jsx(a,{htmlFor:"description",children:"Job Description *"}),e.jsx(p,{id:"description",value:d,onChange:t=>y(t.target.value),placeholder:"Describe the role, responsibilities, and what you're looking for...",className:"min-h-32",required:!0})]}),e.jsxs("div",{children:[e.jsx(a,{htmlFor:"requirements",children:"Requirements"}),e.jsx(p,{id:"requirements",value:b,onChange:t=>S(t.target.value),placeholder:"List the skills, experience, and qualifications required...",className:"min-h-32"})]}),e.jsxs("div",{children:[e.jsx(a,{htmlFor:"skills",children:"Skills"}),e.jsx(p,{id:"skills",value:m,onChange:t=>N(t.target.value),placeholder:"List skills separated by commas (e.g., React, Node.js, Python)",className:"min-h-16"})]}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsx(w,{type:"submit",disabled:j.isPending,className:"bg-talent-primary hover:bg-talent-secondary",children:j.isPending?e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),e.jsx("span",{children:"Creating..."})]}):"Create Job Posting"}),e.jsx(w,{type:"button",variant:"outline",onClick:()=>v("/employer"),children:"Cancel"})]})]})})]})})]})}export{U as default};
